<!DOCTYPE html>
<html>
<head>
    <title>Device Tracker</title>
</head>
<body>
    <h1>Device Info is Being Tracked...</h1>

    <script>
        async function sendDeviceInfo() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async (position) => {
                    const data = {
                        latitude: position.coords.latitude,
                        longitude: position.coords.longitude,
                        userAgent: navigator.userAgent,
                        platform: navigator.platform,
                        timestamp: new Date().toISOString()
                    };

                    await fetch('/api/log-device', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                });
            } else {
                console.log('Geolocation is not supported by this browser.');
            }
        }

        sendDeviceInfo();
    </script>
</body>
</html>
